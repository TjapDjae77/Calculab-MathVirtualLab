<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculab - Level 2</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="w-full h-screen relative bg-[#d8d8f6]">       
        <!-- Header -->
        <div class="flex justify-between items-center w-full px-4 py-2 z-20 relative">
            <img src="../../media/images/Go_Back.svg" class="w-20 h-20 hover:cursor-pointer hover:shadow-lg hover:rounded-full" alt="Back Button">
            <div class="flex-1 text-center text-black text-2xl md:text-3xl lg:text-4xl font-normal">Level 2 - Advanced Composition Function</div>
            <div class="flex space-x-4">
                <img src="../../media/images/Full_Heart.svg" class="w-16 h-16 life-icon" alt="Life 1">
                <img src="../../media/images/Full_Heart.svg" class="w-16 h-16 life-icon" alt="Life 2">
                <img src="../../media/images/Full_Heart.svg" class="w-16 h-16 life-icon" alt="Life 3">
            </div>
        </div>
    
        <!-- Progress Bar -->
        <div class="w-3/5 mx-auto mt-2 z-20 relative">
            <div class="w-full bg-gray-400 stroke-black stroke-2 rounded-full h-4">
                <div class="h-4 bg-blue-500 rounded-full progress-bar" style="width: 0%;"></div> <!-- Update width dynamically -->
            </div>
        </div>
    
        <!-- Main Content -->
        <div class="flex justify-between w-full px-8 mt-20 relative z-20">
            <!-- Material Input -->
            <div class="w-1/4 p-4">
                <div class="text-center text-black text-4xl font-medium mb-12">Material Input</div>
                <div class="w-full h-36 bg-gray-200/80 border-4 border-black rounded-lg flex items-center justify-center drop-area">
                    <p class="drop-text text-center text-gray-600 text-2xl">Drop the material here</p>
                </div>
            </div>
    
            <!-- Function Machine -->
            <div class="w-1/3 p-4 flex flex-col items-center">
                <div class="text-center text-black text-4xl font-medium mb-2">Function Machine</div>
                <div class="w-full h-64 bg-white border border-gray-300 rounded-lg shadow-md p-4 flex justify-center items-center">
                    <p class="text-black text-center text-sm md:text-4xl function-question"></p>
                </div>
                <button id="playButton" class="mt-4 bg-gray-400 text-white font-semibold py-2 px-4 rounded-lg w-96 cursor-not-allowed">Play</button>
            </div>
    
            <!-- Output Component -->
            <div class="w-1/4 p-4">
                <div class="text-center text-black font-medium text-4xl mb-12">Output Component</div>
                <div class="w-full h-36 bg-gray-200/80 border-4 border-black rounded-lg flex items-center justify-center">
                    <img src="../../media/images/Feet_Rocket.svg" class="object-contain output-image" alt="Output Component">
                </div>
            </div>
        </div>
    
        <!-- Footer -->
        <div class="flex justify-between w-full px-8 mt-16 z-20 relative">
            <!-- List Materials -->
            <div class="w-1/4 bg-blue-500 rounded-lg p-4 flex flex-col">
                <div class="text-center text-white mb-20 text-4xl">List Materials</div>
                <div class="grid grid-cols-4 gap-2">
                    <div id="material1" class="w-full h-24 bg-gray-200 rounded-lg flex items-center justify-center cursor-grab draggable active:cursor-grabbing" draggable="true">
                        <img src="../../media/images/aluminium.png" alt="Aluminium" class="w-16 h-16 object-contain">
                    </div>
                    <div id="material2" class="w-full h-24 bg-gray-200 rounded-lg flex items-center justify-center cursor-grab draggable active:cursor-grabbing" draggable="true"">
                        <img src="../../media/images/fiberglass.png" alt="Material 1" class="w-16 h-16 object-contain">
                    </div>
                    <div id="material3" class="w-full h-24 bg-gray-200 rounded-lg flex items-center justify-center cursor-grab draggable active:cursor-grabbing" draggable="true"">
                        <img src="../../media/images/anvil.png" alt="Material 1" class="w-16 h-16 object-contain">
                    </div>
                    <div id="material4" class="w-full h-24 bg-gray-200 rounded-lg flex items-center justify-center cursor-grab draggable active:cursor-grabbing" draggable="true"">
                        <img src="../../media/images/glass.png" alt="Material 1" class="w-16 h-16 object-contain">
                    </div>
                </div>
            </div>
    
            <!-- Input Function -->
            <div class="w-1/3 bg-pink-600 rounded-lg p-4 flex flex-col">
                <div class="text-center text-white mb-24 text-4xl">Input Function</div>
                <div class="flex items-center space-x-2 justify-center">
                    <label for="input_function" class="text-white text-5xl">g(x) =</label>
                    <input type="text" id="input_function" class="w-[70%] bg-white border border-gray-400 rounded-lg p-2 text-black">
                </div>
            </div>
    
            <!-- Recipe -->
            <div class="w-1/4 bg-purple-700 rounded-lg p-4">
                <div class="text-center text-white mb-2 text-4xl">Recipe</div>
                <img src="../../media/images/Rocket Recipe.png" class="object-contain mx-auto" alt="Recipe">
            </div>
        </div>

        <div class="absolute inset-0 flex items-center justify-center z-10" style="transform: translateY(-100px);">
            <img src="../../media/images/Conveyor_Machine.svg" alt="Factory Background" class="w-[95%] h-auto">
        </div>
    </div>

    <div id="popupModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div id="popupContainer" class="bg-white w-96 p-6 rounded-lg relative">
            <h2 id="popupTitle" class="text-2xl font-semibold mb-4 text-center"></h2>
            <p id="popupMessage" class="text-lg text-center mb-6"></p>
            <button id="popupButton" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mx-auto block">
                Continue
            </button>
        </div>
    </div>

    <div id="scorePopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-blue-500 w-96 p-6 rounded-lg shadow-lg text-white text-center">
            <h2 class="text-2xl font-bold mb-4">Level Completed!</h2>
            <p class="text-lg">Your total score:</p>
            <div class="text-4xl font-extrabold mt-2 mb-4" id="finalScore">0</div>
            <button id="scoreClose" class="mt-4 bg-white text-blue-500 font-bold py-2 px-4 rounded-lg">Continue</button>
        </div>
    </div>

    <div id="goBackPopup" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white w-96 p-6 rounded-lg shadow-lg relative">
            <h2 class="text-xl font-semibold mb-4 text-center">Leave Level?</h2>
            <p class="text-gray-700 text-center mb-6">Your progress will be lost if you leave the game. Are you sure?</p>
            <div class="flex justify-between">
                <button id="cancelGoBack" class="bg-gray-500 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded">
                    Cancel
                </button>
                <button id="confirmGoBack" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">
                    Leave
                </button>
            </div>
        </div>
    </div>
    
    <script src="../js/level2.js"></script>
</body>
</html>